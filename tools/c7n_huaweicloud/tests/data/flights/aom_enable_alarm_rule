interactions:
- request:
    method: GET
    uri: https://aom.ap-southeast-1.myhuaweicloud.com/v4/ap-southeat-1/alarm-rules?limit=100&offset=0
    body: null
  response:
    status: {code: 200, message: success}
    body:
      # 这里模拟了一个未启用的指标告警规则
      string: '{
        "alarm_rules": [
          {
            "alarm_rule_id": 1,
            "alarm_rule_name": "new-metric-alarm",
            "alarm_rule_enable": false,
            "alarm_rule_type": "metric",
            "enterprise_project_id": "0",
            "alarm_notifications": {
              "bind_notification_rule_id": "",
              "notification_enable": false
            },
            "metric_alarm_spec": {
              "monitor_type": "all_metric",
              "trigger_conditions": [{
                "metric_name": "container_memory_rss",
                "promql_expr": "container_memory_rss > 100"
              }]
            }
          }
        ],
        "count": 1
      }'

- request:
    method: POST
    # 注意：根据代码逻辑，修改操作使用的是 add_or_update 接口，action_id 为 update-alarm-action
    uri: https://aom.ap-southeast-1.myhuaweicloud.com/v4/ap-southeat-1/alarm-rules?action_id=update-alarm-action
    # 预期的 Body 应该包含更新后的 alarm_rule_enable: true
    body: '{"alarm_rule_name": "new-metric-alarm", "alarm_rule_type": "metric", "alarm_rule_enable": true, ...}'
  response:
    status: {code: 200, message: success}
    body:
      string: '{
        "alarm_rules": [
          {
            "alarm_rule_name": "new-metric-alarm",
            "result": "success"
          }
        ],
        "error_code": "200",
        "error_message": "success"
      }'
version: 1